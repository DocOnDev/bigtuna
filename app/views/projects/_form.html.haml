%div
  = f.label(:name)
  %br
  = f.text_field(:name, :class => 'textfield')
%div
  = f.label(:steps)
  %br
  = f.text_area(:steps, :class => 'textarea')
  %br
  %span.hint
    Special variables are available
    %dl
      %dt
        %tt %build_dir%
      %dd directory where build is checked out
      %dt
        %tt %project_dir%
      %dd directory shared by all builds in project
%div
  = f.label(:vcs_type)
  %br
  = f.select(:vcs_type, BigTuna::VCS_BACKENDS.map { |klass| [klass::NAME, klass::VALUE] }, :class => 'textfield')
%div
  = f.label(:vcs_source)
  %br
  = f.text_field(:vcs_source, :class => 'textfield')
%div
  = f.label(:vcs_branch)
  %br
  = f.text_field(:vcs_branch, :class => 'textfield')
%div
  = f.label(:max_builds)
  %br
  = f.text_field(:max_builds, :class => 'textfield')
%div
  Hooks
  - BigTuna::HOOKS.each do |hook|
    %div.hint
      %label{:for => "project_hooks_#{hook::NAME}"}
        = check_box_tag("project[hooks][#{hook::NAME}]", hook::NAME, f.object.hooks.include?(hook))
        = hook::NAME
      = link_to("Configure", project_config_hook_path(f.object, hook::NAME)) if f.object.hooks.include?(hook)
%div
  = f.label(:hook_name)
  %br
  = f.text_field(:hook_name, :class => 'textfield')
  %br
  %span.hint
    POST to
    %tt http://big.tuna.host/hooks/build/:hook_name:
    to build automatically
%div
  = f.submit(f.object.new_record? ? "Create" : "Update")
